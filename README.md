## 搜尋文章

### Request

`GET /search/articles?q=<關鍵字>&limit=<數量>&cursor=<第幾個>`

#### 說明

`q`

- 空白字元：結果為 0
- 字串含有空白字元：回傳 **400 Bad Request**

`limit` & `cursor`

- 可不給值：`limit` 預設為 `10`；`cursor` 預設為 `0`
- 空字串視為 `0`
- 必須是數字，否則回傳 **400 Bad Request**
- 必須 `>= 0`，否則回傳 **500 Internal Server Error**， `limit` 為 `0` 是合法但找不到結果的
- 必須符合 `limit + cursor <= 10000`，否則回傳 **500 Internal Server Error**

### Response

#### 說明

依照關鍵字去搜尋以下欄位：

1. 標題：含有關鍵字就算符合
2. 作者：帳號要完全符合
3. IP：IP 要完全符合
4. 內文：含有關鍵字就算符合

只要某篇文章其中一個欄位符合搜尋條件，該文章就會被放在搜尋結果。

#### 回傳格式

Response body 為 JSON，其中 `records` 陣列元素為文章。範例如下：

```json
// 搜尋關鍵字：castman
// http://localhost:8080/search/articles?q=castman
{  
   "_metadata":{  
      "cursor":0,
      "limit":10,
      "total_count":1,
      "next_cursor":-1
   },
   "records":[  
      {  
         "id":"M.1413618360.A.4F0",
         "title":"Re: [情報] 事求人網站的開放資料版本",
         "author":"castman (  )",
         "board":"PublicServan",
         "ip":"68.48.168.83",
         "time":"2014-10-18T15:45:58Z",
         "content":": 各位先進好，由於我之前一直覺得事求人網站的設計不夠直覺 : 所以介接了該網站的 open data，弄了一個開放資料的版本 : http://opencpa.castman.net : 依我之前使用事求人網站的經驗，要找自己類科的缺，需要： : 1. 連上網站 : 2. 在職系鍵入資訊或資訊處理 : 3. 勾選須具公務人員任用資格職缺，按查詢 : 出來的職缺沒有照職等排，要看職缺詳情還要點一次檢視；如果還想查看其他類科的 : 缺，又要重新打字；有時候把起訖日期區間拉開，還會跑出新的缺？ : 為了改進這些缺點，我目前設計開放資料版的網站特色如下： : 1. 上方的下拉式選單直接顯示本日所有開放的類科及職缺數 : 2. 職缺預設以職等由高到低呈現，標題只顯示必要資訊，詳細資訊可點選標題展開 : 3. 若該職缺近期內在事求人頻繁開缺(兩次以上)，該筆職缺下方額外顯示開缺日期 : 另，以下類別的職缺將不會顯示: : 1. 職系空白 : 2. 人員類別為約僱人員、駐外人員、代理教師、代課教師、實習老師、其他人員、聘 : 用人員 : 簡單來說就是初步過濾掉非公務人員 : 其實我想作的不只是這樣而已， : 因為目前的網站只是資料的重新展示，加上紀錄各職缺之前的開缺期間 : 要判斷一個缺好不好，還必須有很多其他的消息來源，例如： : 1. 在本板曾經討論過的單位、職系、甚至是該特定的缺 : 2. 讓願意分享的人直接在該職缺下面留言 等 : 不過目前就先這樣了，其他的還沒有空作 : 各位如果覺得好用就請多多利用，這是網站作者最大的成就感來源，謝謝 網站做了小改版 1. 職系的下拉式選單參考銓敘部職系職組對照表，把非公務人員的職系都過濾掉了， 如果你是公務人員但你的職系不見了請通知我 2. 所有下拉式選單由單選變成多選。不確定這個改變是好的，因為降低了一點操作的 便利性，若你有在使用這個網站，對於這個改變有意見也請推文或 email 告知 p.s. 其實事求人的開放資料很亂，包含所有公家機關開的職缺(ex. 代理教師、約聘雇) 有些欄位的內容也沒有依照定義 這個網站只先處理公務人員的原因是我猜測公務人員是事求人網站的主要使用者 而且我當初是寫給自己用的 XD) 代理教師或是找政府約聘僱職缺的人會到事求人網站找嗎? 這要問網站管理員才能知道各類查詢的統計資料了 ",
         "comments":[  
            {  
               "account":"hacoolman",
               "message":"推推",
               "ip":"",
               "time":"2014-10-18T17:34:00+08:00"
            },
            {  
               "account":"p48751",
               "message":"推一個",
               "ip":"",
               "time":"2014-10-18T17:48:00+08:00"
            },
            {  
               "account":"ice57",
               "message":"感謝您的熱心!",
               "ip":"",
               "time":"2014-10-18T22:49:00+08:00"
            },
            {  
               "account":"bigstudent",
               "message":"推推",
               "ip":"",
               "time":"2014-10-19T11:51:00+08:00"
            },
            {  
               "account":"sixonze",
               "message":"推熱心  整個版面看起來乾淨多了  又好找",
               "ip":"",
               "time":"2014-10-20T12:44:00+08:00"
            }
         ]
      }
   ]
}
```

## 搜尋推文

### Request

`GET /search/comments?q=<關鍵字>&limit=<數量>&cursor=<第幾個>`

#### 說明

同第一個 API

### Response

#### 說明

依照關鍵字去搜尋每篇文章所有推文的以下欄位：

1. 推文帳號：帳號要完全符合
2. IP：IP 要完全符合
3. 推文內容：含有關鍵字就算符合

只要某篇文章中任何一個推文的其中一個欄位符合搜尋條件，該文章就會被放在搜尋結果，且符合該搜尋關鍵字的推文用 `hits` 欄位紀錄。

#### 回傳格式

Response body 為 JSON，其中 `records` 陣列元素為文章。跟第一個 API 回傳的 JSON 格式只有一個地方不一樣，就是多了 `hits` 欄位來記錄該文章中符合搜尋關鍵字的推文。範例如下：

```json
// 搜尋關鍵字：p48751
// http://localhost:8080/search/comments?q=p48751
{  
   "_metadata":{  
      "cursor":0,
      "limit":10,
      "total_count":1,
      "next_cursor":-1
   },
   "records":[  
      {  
         "id":"M.1413618360.A.4F0",
         "title":"Re: [情報] 事求人網站的開放資料版本",
         "author":"castman (  )",
         "board":"PublicServan",
         "ip":"68.48.168.83",
         "time":"2014-10-18T15:45:58Z",
         "content":": 各位先進好，由於我之前一直覺得事求人網站的設計不夠直覺 : 所以介接了該網站的 open data，弄了一個開放資料的版本 : http://opencpa.castman.net : 依我之前使用事求人網站的經驗，要找自己類科的缺，需要： : 1. 連上網站 : 2. 在職系鍵入資訊或資訊處理 : 3. 勾選須具公務人員任用資格職缺，按查詢 : 出來的職缺沒有照職等排，要看職缺詳情還要點一次檢視；如果還想查看其他類科的 : 缺，又要重新打字；有時候把起訖日期區間拉開，還會跑出新的缺？ : 為了改進這些缺點，我目前設計開放資料版的網站特色如下： : 1. 上方的下拉式選單直接顯示本日所有開放的類科及職缺數 : 2. 職缺預設以職等由高到低呈現，標題只顯示必要資訊，詳細資訊可點選標題展開 : 3. 若該職缺近期內在事求人頻繁開缺(兩次以上)，該筆職缺下方額外顯示開缺日期 : 另，以下類別的職缺將不會顯示: : 1. 職系空白 : 2. 人員類別為約僱人員、駐外人員、代理教師、代課教師、實習老師、其他人員、聘 : 用人員 : 簡單來說就是初步過濾掉非公務人員 : 其實我想作的不只是這樣而已， : 因為目前的網站只是資料的重新展示，加上紀錄各職缺之前的開缺期間 : 要判斷一個缺好不好，還必須有很多其他的消息來源，例如： : 1. 在本板曾經討論過的單位、職系、甚至是該特定的缺 : 2. 讓願意分享的人直接在該職缺下面留言 等 : 不過目前就先這樣了，其他的還沒有空作 : 各位如果覺得好用就請多多利用，這是網站作者最大的成就感來源，謝謝 網站做了小改版 1. 職系的下拉式選單參考銓敘部職系職組對照表，把非公務人員的職系都過濾掉了， 如果你是公務人員但你的職系不見了請通知我 2. 所有下拉式選單由單選變成多選。不確定這個改變是好的，因為降低了一點操作的 便利性，若你有在使用這個網站，對於這個改變有意見也請推文或 email 告知 p.s. 其實事求人的開放資料很亂，包含所有公家機關開的職缺(ex. 代理教師、約聘雇) 有些欄位的內容也沒有依照定義 這個網站只先處理公務人員的原因是我猜測公務人員是事求人網站的主要使用者 而且我當初是寫給自己用的 XD) 代理教師或是找政府約聘僱職缺的人會到事求人網站找嗎? 這要問網站管理員才能知道各類查詢的統計資料了 ",
         "comments":[  
            {  
               "account":"hacoolman",
               "message":"推推",
               "ip":"",
               "time":"2014-10-18T17:34:00+08:00"
            },
            {  
               "account":"p48751",
               "message":"推一個",
               "ip":"",
               "time":"2014-10-18T17:48:00+08:00"
            },
            {  
               "account":"ice57",
               "message":"感謝您的熱心!",
               "ip":"",
               "time":"2014-10-18T22:49:00+08:00"
            },
            {  
               "account":"bigstudent",
               "message":"推推",
               "ip":"",
               "time":"2014-10-19T11:51:00+08:00"
            },
            {  
               "account":"sixonze",
               "message":"推熱心  整個版面看起來乾淨多了  又好找",
               "ip":"",
               "time":"2014-10-20T12:44:00+08:00"
            }
         ],
         "hits":[  
            {  
               "account":"p48751",
               "message":"推一個",
               "ip":"",
               "time":"2014-10-18T17:48:00+08:00"
            }
         ]
      }
   ]
}
```